.styledGuildsAsChannels-DNHtg_ {
  // extra top padding & background
  .guilds-1SWlCJ {
    width: calc(var(--sgac-sidebar-width) + 16px) !important;
    .scrollerBase-289Jih {
      padding-top: 8px;
      background-color: var(--sgac-background-color) !important;
      width: calc(var(--sgac-sidebar-width) + 16px) !important;
    }
  }

  // Hover Expand Effect
  .guilds-1SWlCJ {
    --sgac-sidebar-width: 40px;
    transition: width 0.25s ease;
    transition-delay: 0.33s;
    // Transition
    .listItem-2Ig28I,
    .folder-2w6LX1,
    .childWrapper-anI2G9,
    .wrapper-1BJsBx,
    .wrapper-shyHJt .expandedFolderBackground-3ZDF05,
    .circleIconButton-hZmpE8,
    .badge-fxFrUP,
    .folderIconWrapper-1Ml_1q,
    .homeIcon-AaowEC {
      transition-delay: 0.33s !important;
    }
    // Hide Text
    .name-z5133D {
      font-size: 0 !important;
      opacity: 0 !important;
      transition: font-size 0s linear 0.33s, opacity 0.25s ease 0.08s !important;
    }
    // Fix Centering
    .badge-fxFrUP {
      margin-right: 0;
      transition: margin 0.33s ease;
    }
    .folderIconWrapper-1Ml_1q {
      margin-right: 0;
      transition: margin 0.33s ease;
    }
    .homeIcon-AaowEC {
      margin-right: 0;
      transition: margin 0.33s ease;
    }
    &:hover {
      transition-delay: 0s;
      // Transition
      .listItem-2Ig28I,
      .folder-2w6LX1,
      .childWrapper-anI2G9,
      .wrapper-1BJsBx,
      .wrapper-shyHJt .expandedFolderBackground-3ZDF05,
      .circleIconButton-hZmpE8,
      .badge-fxFrUP,
      .folderIconWrapper-1Ml_1q,
      .homeIcon-AaowEC {
        transition-delay: 0s !important;
      }
      --sgac-sidebar-width: 220px;
      // Unhide Text
      .name-z5133D {
        font-size: initial !important;
        opacity: 1 !important;
        transition: font-size 0s linear 0s, opacity 0.25s ease 0.15s !important;
      }
      // Fix Centering
      .badge-fxFrUP {
        margin-right: 4px;
      }
      .folderIconWrapper-1Ml_1q {
        margin-right: -8px;
      }
      .homeIcon-AaowEC {
        margin-right: 4px;
      }
    }
  }

  // Uniform width
  .guilds-1SWlCJ {
    .listItem-2Ig28I,
    .folder-2w6LX1,
    .childWrapper-anI2G9,
    .wrapper-1BJsBx,
    .wrapper-shyHJt .expandedFolderBackground-3ZDF05,
    .circleIconButton-hZmpE8 {
      width: var(--sgac-sidebar-width) !important;
      transition: width 0.25s ease;
    }
  }

  .wrapper-shyHJt {
    // Folder background
    .expandedFolderBackground-3ZDF05 {
      left: 8px !important;
      background-color: rgb(var(--sgac-background-light)) !important;
      border-top-style: solid;
      border-top-width: 36px;
      border-top-color: rgba(var(--sgac-text-color), 0.1);
      &.collapsed-2Zqqnx {
        background-color: rgb(var(--sgac-background-dark)) !important;
        border-top-style: none;
      }
    }

    // Folder background hover effect
    &:hover .expandedFolderBackground-3ZDF05.collapsed-2Zqqnx {
      background-color: rgb(var(--sgac-accent)) !important;
    }
  }

  .childWrapper-anI2G9 {
    // Notification badges
    .numberBadge-2s8kKX {
      background-color: rgba(var(--sgac-text-color), 0.2) !important;
    }
    // Server Badge
    .badge-fxFrUP:nth-child(2) {
      display: none !important;
    }
  }

  div[aria-label="Servers"] {
    // Uniform Margin
    .listItem-2Ig28I {
      margin-bottom: 8px !important;
    }
    // Hide all containers
    .folder-1hbNCn,
    .wrapper-1BJsBx {
      background-color: transparent !important;
      background: transparent !important;
    }

    // All Servers
    .childWrapper-anI2G9 {
      color: rgba(var(--sgac-text-color), 0.65);
    }

    // Servers that ARE in folders
    .wrapper-shyHJt {
      .listItem-2Ig28I {
        .folder-2w6LX1,
        .childWrapper-anI2G9 {
          background-color: transparent !important;
          background: transparent !important;
        }
      }
    }

    // Servers NOT in folders
    & > .listItem-2Ig28I {
      margin-bottom: 4px !important;
      margin-top: -2px !important;
      .wrapper-1BJsBx {
        height: 36px !important;
        .childWrapper-anI2G9 {
          height: 36px !important;
          padding-left: 12px !important;
          flex-direction: row-reverse !important;
          background: rgb(var(--sgac-background-dark)) !important;
          border-radius: 0 !important;
        }
      }
    }

    // Selected Servers (in & outside folders)
    .wrapper-1BJsBx.selected-bZ3Lue {
      .childWrapper-anI2G9 {
        background-color: rgb(var(--sgac-accent)) !important;
        color: rgb(var(--sgac-text-color)) !important;
      }
    }
  }

  // Smaller custom folder icons
  .betterFolders-customIcon {
    background-size: 36px;
  }
  // Hide original folder icons
  .guilds-1SWlCJ {
    .wrapper-shyHJt .icon-GhnIRB {
      display: none;
    }
    .folderIconWrapper-1Ml_1q {
      background-color: transparent !important;
      background: transparent !important;
    }
  }

  // Discord logo on "Home" button
  .wrapper-1BJsBx .childWrapper-anI2G9 .homeIcon-AaowEC {
    width: 24px;
    height: 17px;
    opacity: 0.75;
  }

  // "Add a Server" & "Explore Public Servers" buttons
  .guilds-1SWlCJ .listItem-2Ig28I {
    margin-bottom: 4px !important;
    foreignObject {
      width: 22px !important;
    }
  }
  .guilds-1SWlCJ .circleIconButton-hZmpE8 {
    background-color: rgb(var(--sgac-background-dark)) !important;
    border-radius: 4px !important;
    padding: 4px !important;
    height: 36px !important;
    position: relative;

    * {
      color: rgba(var(--sgac-text-color), 0.65) !important;
    }
    ~ .childWrapper-anI2G9 {
      border: none !important;
      background: transparent !important;
      background-color: transparent !important;
    }
    // Hover & selected effects
    &.selected-3mFF3I {
      background-color: rgb(var(--sgac-accent)) !important;

      .childWrapper-anI2G9 * {
        color: rgb(var(--sgac-text-color)) !important;
      }
    }
  }

  // HIDE error message if plugin IS detected
  .guilds-1SWlCJ {
    overflow: hidden;
    &::before {
      display: none !important;
    }
  }
}

// SHOW error message if plugin NOT detected
.guilds-1SWlCJ {
  overflow: visible;
  &::before {
    background-image: url("https://github.com/PINPAL/StyledGuildsAsChannels/blob/main/images/warning.png?raw=true");
    background-repeat: no-repeat;
    background-size: 24px;
    background-position: center;
    content: "Error!\a\a\a DisplayServersAsChannels is not installed or enabled.";
    white-space: pre-wrap;
    text-align: center;
    z-index: 4;
    display: block;
    width: 56px;
    height: 56px;
    background-color: rgb(240, 71, 71);
    color: transparent;
    margin: 8px;
    margin-bottom: 16px;
    border-radius: 6px;
    font-size: 0%;
    transition: width 0.3s ease-in-out, height 0.3s ease-in-out,
      color 0.65s ease-in-out;
  }
  &:hover::before {
    background-position: 16px 12px;
    box-shadow: inset 0 calc(16px + 2rem) 0px 0px rgba(0, 0, 0, 0.25),
      5px 5px 15px 5px rgba(0, 0, 0, 0.2);
    padding: 16px 8px;
    padding-top: -60px;
    font-weight: 500;
    color: white;
    width: var(--sgac-sidebar-width);
    height: calc(32px + 4em);
    font-size: 100%;
  }
}
